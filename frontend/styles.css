/* style.css - RESPONSIVE & FLUID version
   Key changes:
   - root variables for responsive sizes (--sidebar-width, --topbar-height, --gutter)
   - fluid base font-size via clamp()
   - many sizes changed from fixed px to clamp()/var() for smoother scaling
   - kept original structure and selectors so JS and HTML still work
*/

:root{
  /* colors (unchanged) */
  --black: #000000;
  --deep-navy: #0a253b;
  --blue-700: #063da2;
  --accent: #1b85ec;
  --sky: #3ea9f5;
  --muted-blue: #29669b;
  --pale-sky: #a5e2f9;
  --light: #eeeeee;
  --white: #ffffff;
  --bg: var(--light);
  --surface: #f6f7fb;
  --card: var(--white);
  --muted: rgba(32,44,67,0.56);
  --text: #12202f;
  --primary: var(--blue-700);
  --accent-strong: var(--accent);
  --chip-bg: rgba(0,0,0,0.03);
  --chip-active-bg: var(--accent-strong);
  --chip-active-color: #ffffff;
  --shadow: 0 12px 30px rgba(19,28,38,0.06);
  --radius: 12px;
  --max-width: 1400px;

  /* responsive geometry */
  --gutter: clamp(10px, 1.8vw, 28px);
  --topbar-height: clamp(56px, 4.2vw, 72px);
  --sidebar-width: clamp(72px, 8.5vw, 110px);
  --card-pad: clamp(10px, 1.2vw, 20px);
  --radius-clamp: clamp(8px, 1vw, 14px);
  --kpi-min-width: clamp(160px, 22vw, 260px);

  /* typography scale (fluid) */
  --fs-small: clamp(12px, 0.9vw, 14px);
  --fs-base: clamp(14px, 1.1vw, 16px);
  --fs-lg: clamp(16px, 1.6vw, 20px);
  --fs-xl: clamp(18px, 2.2vw, 28px);
}

/* Dark theme overrides (kept) */
.theme-dark{
  --bg: #06101a;
  --surface: #081620;
  --card: #0f1a24;
  --muted: rgba(200,214,226,0.58);
  --text: #e6f1fb;
  --accent: #ffb366;
  --primary: #3ea9f5;
  --auth-bg-1: #0f2b4b;
  --auth-bg-2: #0b1f3a;
  --modal-bg: #131418;
  --topbar-bg: rgba(6,8,10,0.85);
  --chip-bg: rgba(255,255,255,0.02);
  --chip-active-bg: #29669b;
  --chip-active-color: #0f1113;
  --shadow: 0 12px 30px rgba(0,0,0,0.55);
}

/* fluid base font sizing */
html { font-size: var(--fs-base); -webkit-text-size-adjust: 100%; }
*{box-sizing:border-box}
html,body{height:100%;overflow-x:hidden;}
body{
  margin:0;
  font-family:'Poppins',system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  color:var(--text);
  background: linear-gradient(180deg, var(--bg) 0%);
  -webkit-font-smoothing:antialiased;
  line-height:1.45;
  cursor: url('./default.png') 16 16, auto;
  font-synthesis: none;
}

/* small utility tweaks */
.hidden{display:none!important}
.row{display:flex;align-items:center}
.muted{color:var(--muted)}
.small{font-size:var(--fs-small)}

/* splash */
.splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(0deg, rgba(51,182,255,0.06), rgba(51,182,255,0.04));z-index:500}
.splash-inner{text-align:center}
#splashImg{
  width:clamp(120px, 18vw, 240px);
  height:clamp(120px, 18vw, 240px);
  object-fit:contain;
  filter:drop-shadow(0 8px 18px rgba(0,0,0,0.12));
  animation:logoPop .9s cubic-bezier(.2,.9,.3,1) forwards
}
.splash-text{margin-top:12px;font-weight:700;letter-spacing:1px;color:var(--accent);opacity:0;animation:fadeUp .7s forwards .75s}

/* overlays */
.landing-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(62,169,245,0.06);
  padding:calc(var(--gutter));
  z-index:400;
}

/* landing split grid */
.landing-split{
  width:100%;
  max-width:1100px;
  display:grid;
  grid-template-columns: minmax(260px, 40%) 1fr; /* fluid columns */
  gap:clamp(12px, 2.2vw, 28px);
  align-items:stretch;
}

/* visual card */
.landing-visual{
  background: linear-gradient(180deg,var(--surface),var(--surface));
  border-radius:var(--radius-clamp);
  padding:calc(var(--card-pad));
  box-shadow: var(--shadow);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:hidden;
}

.visual-inner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
  text-align:center;
  padding:6px 8px;
}
.visual-hero{
  width:clamp(220px, 30vw, 360px);
  max-width:100%;
  border-radius:12px;
  object-fit:cover;
  box-shadow:0 10px 30px rgba(0,0,0,0.06);
}
.visual-logo{
  position:absolute;
  top:14px;
  left:14px;
  width:clamp(40px, 5vw, 64px);
  height:clamp(40px, 5vw, 64px);
  object-fit:contain;
  border-radius:10px;
  padding:6px;
  z-index:25;
}

/* auth card */
.forms-inner{ display:flex; align-items:center; justify-content:center; height:100%; padding:12px; }
.auth-card{
  width:100%;
  max-width:520px;
  border-radius:var(--radius-clamp);
  padding:calc(var(--card-pad));
  box-shadow: var(--shadow);
  color: #fff;
  position:relative;
  overflow:visible;
  background: linear-gradient(180deg, var(--primary), var(--accent-strong));
}
.theme-dark .auth-card{ background: linear-gradient(180deg, rgba(62,169,245,0.08), rgba(27,133,236,0.12)); color:var(--text); }

/* headings and auth */
.auth-panel{ display:block; }
.auth-panel.hidden{ display:none; }
.auth-head{ display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.auth-title h2{ margin:0; font-size:clamp(18px, 1.8vw, 22px); color:inherit; }
.auth-title .small{ margin-top:4px; color: rgba(255,255,255,0.92); font-size:var(--fs-small); }

/* forms */
.field{display:flex;flex-direction:column;gap:8px;position:relative;}

.pwd-toggle {
  position: absolute;
  right: 10px;
  top: 70%;
  transform: translateY(-50%);
  border: none;
  background: transparent;
  padding: 6px;
  cursor: pointer;
  font-size: 0.95rem;
  color: var(--muted);
  border-radius: 6px;
}
.pwd-toggle:focus { outline: 2px solid rgba(27,133,236,0.16); }

.field .field-label{
  font-size:var(--fs-small);
  color:rgba(255,255,255,0.92);
  font-weight:600;
  padding-top: 10px;
}
.auth-form{ color:var(--text); display:flex; flex-direction:column; gap:8px; }
.auth-form .field{ display:flex; flex-direction:column; gap:8px; }
.auth-form .field .field-label{ font-size:var(--fs-small); font-weight:700; color: #fff; padding-top:6px; }
.auth-form input[type="text"],
.auth-form input[type="email"],
.form input[type="email"],
.form input[type="text"],
.form input[type="password"],
.auth-form input[type="password"],
.auth-form select{
  height:clamp(40px, 4.5vw, 48px);
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(0, 0, 0, 0.58);
  font-size:var(--fs-base);
  background:#fff;
  color:var(--text);
  outline:none;
}
.theme-dark .auth-form input[type="text"],
.theme-dark .auth-form input[type="password"],
.theme-dark .auth-form select{
  background: var(--card);
  border: 1px solid rgba(255,255,255,0.06);
  color: var(--text);
}
.auth-card .form-actions{ display:flex; justify-content:stretch; padding-top:12px; gap:10px; }
.auth-card .btn { font-weight:800; font-size:var(--fs-base); }
.auth-card .btn.ghost{
  background: transparent;
  border: 2px solid rgba(255,255,255,0.18);
  color: #fff;
}
.auth-card .btn.primary{
  background: #fff;
  color: var(--primary);
  border: none;
}
.auth-form input:focus, .auth-form select:focus, .auth-card .btn:focus{
  outline: none;
  box-shadow: 0 0 0 6px rgba(255,255,255,0.08);
  border-color: rgba(255,255,255,0.9);
}
.form-actions{display:flex;justify-content:stretch;padding:12px 0px 0px}
.btn {
    background: var(--chip-bg);
    color: var(--text);
    border: 1px solid rgb(0 0 0 / 51%);
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:700;
    font-size:var(--fs-base);
}
.btn.large{padding:12px 16px;font-size:clamp(14px,1.2vw,16px)}
.btn.primary{background:var(--chip-active-bg);color:var(--chip-active-color)}
.btn.ghost{
    background: var(--chip-bg);
    border: 1px solid rgb(0 0 0 / 51%);
    color: var(--text);
}
.btn.soft { background: var(--chip-bg); }
.btn.success { background: rgba(47,157,86,0.08); }
.btn.danger{ background: rgba(217,83,79,0.08); color:var(--text); border:1px solid rgba(217,83,79,0.14); }

.auth-foot{ display:flex; align-items:center; justify-content:space-between; margin-top:12px; gap:12px; }
.auth-foot .muted{ color: rgba(255,255,255,0.9); font-size:var(--fs-small); }

/* modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(8,6,5,0.38);z-index:10050;padding:18px}
.modal.hidden{display:none}
.modal-card{
  width:100%;
  max-width:720px;
  border-radius:var(--radius-clamp);
  color: var(--text);
  background:var(--card);
  padding:calc(var(--card-pad));
  position:relative;
  box-shadow:0 20px 60px rgba(21,15,12,0.16);
  transform:translateY(12px) scale(.98);
  opacity:0;
  transition:transform .22s cubic-bezier(.2,.9,.3,1),opacity .22s ease
}
.modal:not(.hidden) .modal-card{transform:translateY(0) scale(1);opacity:1}
.modal-close{color: var(--text);position:absolute;right:12px;top:12px;border-radius:8px;background:transparent;border:none;font-size:16px;cursor:pointer;opacity: 0.75;transition: opacity 0.2s ease, color 0.2s ease}
.modal-card .field{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
.modal-card .field-label{font-weight:700;color: var(--text);font-size:var(--fs-small)}
.modal-card input[type="text"],.modal-card input[type="number"],.modal-card input[type="date"],.modal-card select,.modal-card textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-size:var(--fs-base);background:var(--card);color:var(--text);outline:none}
.modal-card textarea{min-height:80px;resize:vertical;padding-top:10px}

.modal-card h3,
.modal-card h4 {
  color: var(--text);
  font-size: clamp(16px, 1.6vw, 20px);
}
.modal-close:hover {
  opacity: 1;
}
.modal-card label {
  color: var(--text);
  font-weight: 600;
}
.modal-card input,
.modal-card textarea,
.modal-card select {
  background: var(--card);
  color: var(--text);
  border: 1px solid rgba(0,0,0,0.08);
}
.theme-dark .modal-card input,
.theme-dark .modal-card textarea,
.theme-dark .modal-card select {
  border-color: rgba(255,255,255,0.12);
}
.theme-dark .modal-close {
  color: var(--text);
}

/* topbar */
.topbar{
  height:var(--topbar-height);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:8px clamp(10px, 2vw, 20px);
  position:sticky;
  top:0;
  z-index:80;
  background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(255,255,255,0.35));
  border-bottom: 1px solid rgba(0,0,0,0.04);
  backdrop-filter: blur(6px);
}
.theme-dark .topbar{
  background: linear-gradient(180deg, rgba(6,8,10,0.7), rgba(6,8,10,0.9));
  border-bottom: 1px solid rgba(255,255,255,0.04);
}
.left-topbar{display:flex;align-items:center;gap:12px}
.hamburger{display:none;background:transparent;border:none;font-size:18px;cursor:pointer;color:var(--text)}

.hamburger,
.hamburger i,
.hamburger span {
  color: var(--text);
}
.brand{display:flex;align-items:center;gap:12px}
.logo-mini { display:flex; align-items:center; justify-content:center; }
.logo-mini-img {
  width:clamp(32px, 4.5vw, 44px);
  height:clamp(32px, 4.5vw, 44px);
  border-radius:8px;
  object-fit:cover;
  display:block;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}
.brand-text .brand-name{font-weight:700; font-size:clamp(14px,1.2vw,16px)}
.brand-text .brand-sub{font-size:var(--fs-small);color:var(--muted)}

.top-meta{display:flex;gap:8px;align-items:center;margin-right:12px}
.meta-btn{height:clamp(36px,3.2vw,44px);border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:var(--card);padding:6px 10px;display:flex;align-items:center;gap:8px;color:var(--text);cursor:default}
.meta-btn, .btn.small { min-height:40px; min-width:44px; padding:8px 10px; }

.theme-dark .meta-btn{border-color:rgba(255,255,255,0.06)}

.top-center{flex:1;display:flex;justify-content:center;padding:0 12px}
.top-search{position:relative;max-width:640px;width:100%}
.top-search input{width:100%;height:44px;padding:8px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:var(--card);color:var(--text);box-shadow:0 6px 18px rgba(0,0,0,0.04);font-size:var(--fs-base)}
.theme-dark .top-search input{border-color:rgba(255,255,255,0.06);background:var(--card)}

.search-suggestions {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  right: 0;
  background: var(--card);
  border: 1px solid rgba(0,0,0,0.06);
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  border-radius: 10px;
  z-index: 2200;
  max-height: clamp(140px, 28vh, 260px);
  overflow: auto;
  padding: 6px 4px;
  font-size:var(--fs-base);
}
.search-suggestions ul{ list-style:none;margin:0;padding:0; }
.search-suggestions li{
  padding:8px 10px;
  display:flex;
  gap:8px;
  align-items:center;
  cursor:pointer;
  border-radius:8px;
  color:var(--text);
  font-weight:600;
}
.search-suggestions li .meta { font-weight:400; font-size:12px; color:var(--muted); margin-left:auto; }
.search-suggestions li:hover, .search-suggestions li.active {
  background: rgba(0,0,0,0.04);
}
.theme-dark .search-suggestions { border-color: rgba(255,255,255,0.06); box-shadow: 0 8px 20px rgba(0,0,0,0.45); }

.top-nav{display:flex;gap:12px;align-items:center}
.top-nav .nav-btn{background:transparent;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700;color:var(--primary)}
.top-nav .nav-btn.active{background:rgba(0,0,0,0.04)}

.user-badge{padding:8px 12px;border-radius:12px;background:rgba(0,0,0,0.03);font-size:var(--fs-small);cursor:pointer;display:inline-flex;align-items:center;gap:8px}
.user-menu{position:absolute;right:0;top:52px;background:var(--card);border-radius:10px;box-shadow:0 18px 40px rgba(0,0,0,0.16);padding:12px;width:220px;z-index:200;transform-origin:top right}
.user-menu.hidden{display:none}

/* base layout */
.layout{
  display:flex;
  min-height: calc(100vh - var(--topbar-height));
  max-width:var(--max-width);
  margin:calc(var(--gutter)) auto;
  padding:0 clamp(10px, 2vw, 20px);
  gap:clamp(10px, 2vw, 20px);
  align-items:stretch;
  overflow: hidden;
  box-sizing: border-box;
}

/* sidebar uses responsive variable */
.sidebar{
  width:var(--sidebar-width);
  min-height:calc(100vh - var(--topbar-height));
  position:fixed;
  left:calc(clamp(12px, 1.5vw, 18px));
  top:calc(var(--topbar-height) + 8px);
  border-radius:12px;
  padding:12px;
  background:linear-gradient(180deg,var(--card),var(--card));
  box-shadow:var(--shadow);
  flex-shrink:0;
  z-index:60;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  visibility: visible; 
  opacity: 1;
  max-height: calc(100vh - (var(--topbar-height) + 32px));
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 18px;
}

/* scrollbars same */
.sidebar::-webkit-scrollbar { width: 10px; }
.sidebar::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.08);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.sidebar::-webkit-scrollbar-track { background: transparent; }

@supports (scrollbar-width: thin) {
  .sidebar { scrollbar-width: thin; scrollbar-color: rgba(0,0,0,0.08) transparent; }
}

.sidebar .sidebar-logo {
  display:flex;
  align-items:center;
  gap:10px;
  width:100%;
  padding:4px 6px;
}

.sidebar-logo-img {
  width:clamp(36px, 4.5vw, 48px);
  height:clamp(36px, 4.5vw, 48px);
  border-radius:8px;
  object-fit:cover;
  display:block;
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}

.sidebar.open{transform:translateX(0)}

.nav{display:flex;flex-direction:column;gap:8px;margin-top:6px;width:100%}
.nav-item{display:flex;flex-direction:column;align-items:center;gap:6px;background:transparent;border:none;text-align:center;padding:12px;border-radius:10px;color:var(--muted);font-weight:700;cursor:pointer;width:100%}
.nav-item i{font-size:18px}
.nav-item span{font-size:11px;display:block;margin-top:4px}

.sidebar .nav-item:hover {
  background: var(--chip-active-bg);
  color: var(--chip-active-color);
}

.nav-item.active{background:var(--chip-active-bg);color:var(--chip-active-color)}

.sidebar-bottom {
  width: 100%;
  position: relative;
  bottom: 12px;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 8px 6px;
  z-index: 20;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,0.01));
}

/* logout button tweaks */
#logoutBtn.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  width: 100%;
  padding: 10px 8px;
  border-radius: 10px;
  background: transparent;
  border: none;
  color: var(--muted);
  font-weight: 700;
  cursor: pointer;
  transition: background .12s ease, color .12s ease, transform .08s ease;
}
#logoutBtn.nav-item i { font-size: 18px; }
#logoutBtn.nav-item:hover,
#logoutBtn.nav-item:focus {
  background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01));
  color: var(--primary);
  outline: none;
  transform: translateY(-1px);
}
#logoutBtn.nav-item.logout:hover { color: var(--accent-strong); }
.sidebar .nav-item.logout{color:var(--accent-strong)}
.theme-dark .sidebar .nav-item:hover {background: rgba(255,255,255,0.06)}

/* main area: margin-left derives from sidebar width */
.main{
  flex:1;
  margin-left: calc(var(--sidebar-width) + 30px);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  min-height:calc(100vh - var(--topbar-height));
  box-sizing:border-box;
  padding-bottom:96px;
  transition: margin-left .18s ease;
}

/* headers and cards */
.page-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
.page-actions{display:flex;align-items:center;gap:10px}
.page-actions input{height:40px;padding:8px 10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:var(--card);color:var(--text)}

.kpi-row{display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap}
.kpi-card { flex:1; min-height:84px; padding:12px; border-radius:12px; background:var(--card); box-shadow:var(--shadow); border:1px solid rgba(0,0,0,0.04); }
.kpi-title { font-size:var(--fs-small); color:var(--muted); margin-bottom:8px; }
.kpi-value { font-weight:800; font-size:clamp(18px, 2.6vw, 24px); }

/* grid layouts use fluid fallback */
.grid-2{display:grid;grid-template-columns:1fr minmax(260px, 360px);gap:16px;margin-bottom:16px;min-height:220px;}
@media (min-width: 1400px) {
  .grid-2 { grid-template-columns: 1fr 420px; } /* wider screens get larger right column */
}

.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(280px, 30%), 1fr));gap:12px}
.product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(220px, 24%),1fr));gap:12px}

.filter-chips{display:flex;gap:8px;align-items:center}
.chip{padding:8px 12px;border-radius:999px;background:var(--chip-bg);border:none;cursor:pointer;font-weight:700;color:var(--text);transition:transform .12s,box-shadow .12s}
.chip:hover{transform:translateY(-2px)}
.chip.active{background:var(--chip-active-bg);color:var(--chip-active-color)}

.gap{gap:8px}

/* form inputs color consistency maintained */
#bakeryProfileForm,
#bakeryProfileForm label,
#bakeryProfileForm p,
#bakeryProfileForm span,
#bakeryProfileForm h3,
#profileForm span,
#bakeryProfileForm h4 {
  color: var(--text);
}

#bakeryProfileForm input,
#profileForm input,
#bakeryProfileForm textarea,
#bakeryProfileForm select {
  width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(0, 0, 0, 0.12);
  font-size: var(--fs-base);
  background: var(--card);
  color: var(--text);
  outline: none;
}

/* profile & modal small */
.modal-card.modal-small{
  max-width: 480px;
  padding: 14px;
  border-radius: var(--radius-clamp);
}
.modal-card.modal-small .modal-close{ color: var(--text); background:transparent; }
.theme-dark .auth-title .small{ color: var(--muted); }
.modal-card.modal-small h3{ font-size:clamp(16px,1.6vw,18px); margin-bottom:8px; }

/* page header actions */
.page-header .page-actions #activityFilter{
  height:40px;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.08);
  background:var(--card);
  color:var(--text);
  font-weight:700;
  min-width:150px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.04);
}

/* cards grid repeated - kept */
.cards-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(238px, 1fr));
  gap:12px;
}

/* chart container fluid */
.chart-container{ width:100%; height:clamp(180px, 22vh, 320px); position:relative; overflow:hidden; }
.chart-container canvas{ display:block; width:100% !important; height:100% !important; max-width:100% !important; }

.chart-legend { font-size:var(--fs-base); }

/* hide some specific KPIs (kept) */
#kpi-income, #kpi-sales { display: none !important; }
#kpi-income + .kpi-title, #kpi-sales + .kpi-title { display: none !important; }

/* ingredient list - keeps responsive table behavior but with fluid spacing */
#ingredientList {
  display: block;
  width: 100%;
  overflow: hidden !important;
  box-sizing: border-box;
  box-shadow: var(--shadow) !important;
  background: var(--card) !important;
  padding: 8px !important;
  border-radius: 12px !important;
}

/* responsive table behaviors preserved - reduced fixed paddings slightly for small screens */
#ingredientList .inv-table thead th {
  text-align: left;
  padding: 12px 10px;
  font-weight: 800;
  color: var(--muted);
  font-size: var(--fs-small);
  background: linear-gradient(180deg, transparent, rgba(0,0,0,0.02));
  border-bottom: 1px solid rgba(0,0,0,0.04);
  position: sticky;
  top: 0;
  z-index: 1;
}

/* rows */
#ingredientList .inv-table td {
  padding: 10px;
  vertical-align: middle;
  border-bottom: 1px solid rgba(0,0,0,0.04);
  color: var(--text);
  font-size: var(--fs-base);
}

/* inputs in table slightly more fluid */
#ingredientList .inv-table input[type="number"],
#ingredientList .inv-table input[type="text"] {
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid rgba(0,0,0,0.06);
  background: var(--card);
  color: var(--text);
  min-width: 68px;
  box-sizing: border-box;
  font-weight:700;
  font-size: var(--fs-base);
}

/* media query adjustments simplified and more consistent */
/* NOTE: we still keep breakpoints for significant layout shifts but rely more on fluid sizing */
@media (max-width: 1100px) {
  .grid-2 { grid-template-columns: 1fr; }
  .chart-container { height: clamp(200px, 24vh, 280px); }
  #ingredientList { padding: 6px 4px 0 4px; }
  #ingredientList .inv-table { display: block; width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; border-radius: 10px; }
  #ingredientList .inv-table thead th { padding: 10px 8px; font-size:var(--fs-small); }
  #ingredientList .inv-table td { padding: 8px; font-size:var(--fs-small); }
  .main { margin-left: calc(min(var(--sidebar-width), 110px) + 20px); }
}

/* tablet-ish */
@media (max-width:900px){
  .top-nav{display:none}
  .layout {
    max-width: var(--max-width);
    margin: calc(var(--gutter) / 1.2) auto;
    padding: 0 12px;
    width: 100%;
    box-sizing: border-box;
  }
  .modal-card{max-width:96vw;padding:14px}

  .profile-grid{ grid-template-columns: 1fr; }
  .avatar-preview{ width:96px; height:96px; }
  .page-header{ flex-direction:column; align-items:flex-start; gap:8px; }
  .page-actions{ width:100%; display:flex; justify-content:flex-end; gap:8px; }
  .profile-left{ order:1; }
  .profile-right{ order:0; }

  .top-search{display:none}

  .landing-split{ grid-template-columns: 1fr; gap:14px; padding:8px; }
  .visual-inner{ display:none; } 
  .auth-card{ max-width:100%; padding:16px; }
  .top-center { display: none; }               

  .sidebar {
    left: 0;
    top: var(--topbar-height);
    width: clamp(86px, 18vw, 160px);
    height: calc(100vh - var(--topbar-height));
    transform: translateX(-120%);
    transition: transform .22s ease;
    position: fixed;
    z-index: 9999;
    border-radius: 0 12px 12px 0;
    box-shadow: 0 30px 80px rgba(6,8,10,0.36);
    background: linear-gradient(180deg, var(--card), var(--card));
    align-items: flex-start;
    padding: 14px;
  }

  .avatar-wrap { align-items:center; text-align:center; }
  .profile-fields { width:100%; }
  .profile-left { align-items:center; }
  .profile-grid { grid-template-columns: 1fr; gap:12px; }
  .profile-right { order: 2; }
  .profile-left { order: 1; }

  .sidebar.open { transform: translateX(0); }

  .main {
    margin-left: 0 !important;
    margin-right: 0;
    padding: 12px;
    max-width: 100%;
    box-sizing: border-box;
  }

  .main > .page-header,
  .main > section {
    margin-inline: auto;
    width: 100%;
  }

  .sidebar .sidebar-logo{ display:block; }

  #drawerOverlay {
    position: fixed;
    inset: 0;
    z-index: 9990;
    background: rgba(0,0,0,0.18);
  }
  .sidebar .sidebar-logo strong { display:inline-block; font-size:14px; }
  .sidebar .sidebar-logo { justify-content:flex-start; padding:8px 6px; }
  .hamburger { display: block !important; }

  #logoutBtn.nav-item span { display: inline-block; }
  #logoutBtn.nav-item { flex-direction: row; justify-content: flex-start; gap: 10px; padding: 10px 14px; border-radius: 8px; }
  .sidebar-bottom { padding: 10px 8px; }
}

/* smaller phones */
@media (max-width:560px) {
  #ingredientList { border-radius: 10px; padding: 6px; }
  #ingredientList .inv-table { border-radius: 8px; }
  #ingredientList .inv-table thead { display: none; } 
  #ingredientList .inv-table tbody tr {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 8px;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 10px;
  }
  #ingredientList .inv-table td {
    display: block;
    border: none;
    padding: 6px 4px;
  }
  #ingredientList .inv-table td:nth-child(1),
  #ingredientList .inv-table td:nth-child(2) {
    grid-column: 1 / -1;
  }
  #ingredientList .inv-table td:nth-child(3),
  #ingredientList .inv-table td:nth-child(4),
  #ingredientList .inv-table td:nth-child(5),
  #ingredientList .inv-table td:nth-child(6) {
    font-size:var(--fs-base);
    font-weight:800; 
    color:var(--primary);
  }
  #ingredientList .inv-table td:nth-child(9) { display:flex; gap:8px; justify-self:end; align-items:center; }
  #ingredientList .inv-table .qty-value { font-weight:900; font-size:calc(var(--fs-base) + 2px); }
  #ingredientList .inv-table input { width: 100%; min-width: 0; }
  .chart-container { height: clamp(160px, 26vh, 240px); }
  .main { padding: 10px; }
}

/* very small phones */
@media (max-width:420px) {
  .brand-text .brand-sub { display: none !important; }
  .page-actions { gap: 8px; flex-wrap:wrap; justify-content:flex-end; }
  .page-header { gap: 8px; flex-direction: column; align-items:flex-start; }
  .card { padding: 10px; }
  .modal-card { max-width: 96vw; padding: 12px; }
  .chart-container { height: clamp(140px, 30vh, 200px); }
  .global-loader .loader-box { padding: 12px; gap:10px; }
  .help-tooltip { max-width: 90vw; font-size:14px; padding:10px; }
}

/* KPI responsiveness */
.kpi-card { position: relative; cursor: pointer; transition: transform .12s ease; }
.kpi-card:focus { outline: 2px solid rgba(27,133,236,0.12); border-radius: 12px; }
.kpi-popover { display: none; position: absolute; top: calc(100% + 10px); left: 8px; min-width: 220px; max-width: 420px; background: var(--card); border-radius: 10px; box-shadow: var(--shadow); padding: 8px; border: 1px solid rgba(0,0,0,0.06); z-index: 300; }
.kpi-popover ul { list-style: none; margin: 0; padding: 6px 4px; max-height: 260px; overflow: auto; }
.kpi-card:hover .kpi-popover, .kpi-card.hover .kpi-popover { display: block; }

/* mobile stacked panel */
.kpi-popover-mobile { display: none; margin-top: 8px; background: var(--card); border-radius: 10px; padding: 8px; box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.06); }
.kpi-popover-mobile ul { list-style:none; margin:0; padding:0; max-height: 320px; overflow:auto; }
.kpi-card.expanded .kpi-popover-mobile { display:block; }

/* small screens: KPI row becomes scrollable / stacked */
@media (max-width:900px) {
  .kpi-row { overflow-x: auto; padding-bottom: 8px; -webkit-overflow-scrolling: touch; }
  .kpi-row .kpi-card { flex: 0 0 var(--kpi-min-width); min-width: calc(var(--kpi-min-width) - 20px); }
  .kpi-card .kpi-title { font-size:var(--fs-small); }
  .kpi-value { font-size:clamp(16px,2.4vw,20px); }
  .kpi-popover { display: none !important; }
}
@media (max-width:420px) {
  .kpi-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap:10px; }
  .kpi-row .kpi-card { flex: 1 1 auto; min-width: auto; }
}

/* help overlay, recent profiles, global loader kept but scaling adjusted slightly */
.help-overlay { position: fixed; inset: 0; background: rgba(6,8,10,0.56); z-index: 100000; display: flex; align-items: flex-start; justify-content: center; pointer-events: auto; overflow: auto; -webkit-overflow-scrolling: touch; }
.help-spotlight { position: absolute; border-radius: 10px; box-shadow: 0 0 0 9999px rgba(6,8,10,0.56), 0 12px 30px rgba(0,0,0,0.4); pointer-events: none; transition: all 220ms cubic-bezier(.2,.9,.2,1); will-change: left, top, width, height; border: 2px solid rgba(255,255,255,0.14); background: transparent; }
.help-tooltip { position: absolute; max-width: 420px; background: var(--card); color: var(--text); border-radius: 10px; padding: 12px; box-shadow: 0 18px 40px rgba(0,0,0,0.28); z-index: 100001; font-size: var(--fs-base); line-height: 1.3; pointer-events: auto; }
.help-tooltip:after { content: ""; position: absolute; width: 14px; height: 14px; transform: rotate(45deg); background: var(--card); box-shadow: 0 18px 40px rgba(0,0,0,0.12); z-index: -1; }
.help-tooltip.top:after    { bottom: -7px; left: 20px; }
.help-tooltip.bottom:after { top: -7px; left: 20px; }
.help-tooltip.left:after   { right: -7px; top: 16px; }
.help-tooltip.right:after  { left: -7px; top: 16px; }
.help-tooltip h4 { margin:0 0 6px 0; font-size:clamp(14px,1.2vw,15px); font-weight:800 }
.help-tooltip p { margin:0 0 8px 0; color:var(--muted); font-size:var(--fs-small) }
.help-controls { display:flex; gap:8px; justify-content:flex-end; margin-top:8px; flex-wrap:wrap; }
.help-controls .btn { font-weight:700; padding:8px 10px; border-radius:8px; }
@media (max-width:640px){ .help-tooltip { max-width: 92vw; font-size:var(--fs-base); padding:10px; } .help-spotlight { border-radius:8px; } }

/* small touches */
#helpBtn { border-radius:10px; padding:8px 10px; background: transparent; border:1px solid rgba(0,0,0,0.06); cursor:pointer; font-weight:800; }
.theme-dark #helpBtn { border-color: rgba(255,255,255,0.06); color:var(--text) }
#helpBtn:hover { background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01)); color: var(--primary); transform: translateY(-1px); }

/* recent profiles */
.recent-profiles { display:block; gap:8px; }
.recent-profiles .rp-title { font-weight:700; color:var(--muted); margin-bottom:6px; font-size:var(--fs-small); }
.rp-list { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
.recent-profile { display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:10px; background:var(--card); border:1px solid rgba(0, 0, 0, 0.696); box-shadow:var(--shadow); cursor:pointer; min-width:120px; }
.rp-avatar { width:40px; height:40px; border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center; background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01)); font-weight:800; color:var(--text) }
.rp-avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
.rp-name { font-weight:800; font-size:13px; color:var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:120px;}
.rp-remove { margin-left:8px; background:transparent;border:none;color:var(--muted);font-weight:800;font-size:14px;cursor:pointer;padding:6px;border-radius:6px }
.rp-remove:focus{ outline:2px solid rgba(27,133,236,0.12) }
@media (max-width:420px){ .recent-profile{ min-width: 48%; } .rp-name{ max-width:80px; } }

/* small tweaks to modal small style kept */
.modal-card.modal-small{
  max-width:400px;
  padding:16px;
  border-radius:var(--radius-clamp);
  box-shadow:0 18px 40px rgba(0,0,0,0.28);
  background:var(--card);
}
.modal-card.modal-small h2{
  font-size:clamp(18px,2.2vw,20px);
  font-weight:800;
  margin-bottom:12px;
  color:var(--text);
}

/* loading spinner */
.btn-spinner { display: inline-block; width: 14px; height: 14px; border-radius: 50%; border: 2px solid rgba(0,0,0,0.08); border-top-color: var(--accent-strong); animation: btn-spin 0.8s linear infinite; vertical-align: middle; margin-right: 8px; }
@keyframes btn-spin { to { transform: rotate(360deg); } }
.theme-dark .btn .spinner { border: 2px solid rgba(255,255,255,0.12); border-top-color: var(--accent-strong); }
@keyframes auth-spin { to { transform: rotate(360deg); } }
.btn.loading { opacity: 0.98; transform: translateY(-0.5px); pointer-events: none; }
.btn.loading .btn-label { opacity: 0.95; }
.btn.loading .spinner { display: inline-block; }

/* global loader */
.global-loader {
  position: fixed;
  inset: 0;
  z-index: 200000;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(6,8,10,0.52);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  pointer-events: auto;
}
.global-loader .loader-box {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 16px 18px;
  border-radius: 12px;
  background: var(--card);
  box-shadow: 0 20px 60px rgba(0,0,0,0.28);
  min-width: 220px;
  max-width: 88%;
  justify-content: center;
  flex-direction: column;
  text-align: center;
}
.global-loader .global-spinner { width: 48px; height: 48px; border-radius: 50%; border: 4px solid rgba(0,0,0,0.06); border-top-color: var(--accent-strong); animation: global-spin 0.9s linear infinite; box-sizing: border-box; margin-bottom: 6px; }
@keyframes global-spin { to { transform: rotate(360deg); } }
.global-loader .loader-title { font-weight:800; font-size:clamp(14px,1.2vw,15px); color:var(--text); margin-bottom:4px; }
.global-loader .loader-sub { font-size:var(--fs-small); color:var(--muted); max-width: 36rem; line-height:1.2; }

/* profile big and settings kept with fluid widths */
.profile-big .avatar-preview { width:clamp(120px, 18vw, 160px); height:clamp(120px, 18vw, 160px); border-radius:14px; overflow:hidden; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg,#f6f7fb,#fff); border:1px solid rgba(0,0,0,0.04); box-shadow:0 10px 30px rgba(0,0,0,0.04); }
.profile-big .profile-left { width:clamp(260px, 28vw, 350px); }
.profile-big .profile-right { flex:1; padding-left: 40px; box-sizing: border-box; }
.settings-grid .card { box-shadow: var(--shadow); border-radius:12px; }

/* last bits */
button,
.btn,
a,
[role="button"],
.clickable {
  cursor: url('./default.png') 32 32, auto;
}
button:disabled,
.btn:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}
.in-input,
.out-input,
.min-input,
#editQty,
#editMin,
#ingQty,
#ingMin {
  cursor: url('./add_default.png') 32 32, auto;
}
.btn:hover:not(:disabled) { transform: translateY(-1px); filter: brightness(1.05); }
.btn:active:not(:disabled) { transform: translateY(0); }

/* inventory layout fluid columns */
.inventory-layout {
  display: grid;
  grid-template-columns: 1fr minmax(240px, 340px);
  gap: 16px;
  align-items: start;
  margin-top: 8px;
}
.inv-right .card {
  position: sticky;
  top: calc(var(--topbar-height) + 16px);
  max-height: calc(100vh - (var(--topbar-height) + 120px));
  overflow: auto;
  padding-bottom: 12px;
}
#inventoryRecentActivity { list-style:none;margin:0;padding:0;font-weight: 700; }
#inventoryRecentActivity li { padding:8px 6px;border-radius:8px;margin-bottom:8px;background:var(--card);border:1px solid rgba(0,0,0,0.04);box-shadow:var(--shadow); }
#inventoryRecentActivity li .muted { display:block;margin-top:6px;color:var(--muted);font-size:12px; }

@media (max-width:900px){
  .inventory-layout{ grid-template-columns:1fr; }
  .inv-right .card{ position:static; max-height:none; overflow:visible; }
}

/* print */
@media print {
  #ingredientList { padding:0 }
  .inv-table thead th { position: static !important; }
  .inv-table tbody tr:hover { transform: none !important; box-shadow: none !important; }
}

/* small accessibility improvements */
.kpi-card:focus { outline-offset: 2px; }
.auth-form input:focus { outline: 2px solid rgba(27,133,236,0.08); }